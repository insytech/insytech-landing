---
import Container from "../shared/Container.astro";

const faqItems = [
    {
        question: "¿Qué tipos de cámara soportan?",
        answer: "Soportamos cámaras industriales de marcas líderes como Basler, FLIR, Cognex, y Keyence. También trabajamos con cámaras GigE Vision, USB3 Vision, y cámaras IP estándar. La resolución puede ir desde 1MP hasta 20MP dependiendo de la aplicación.",
    },
    {
        question: "¿Cómo se integra con mi PLC existente?",
        answer: "Nos integramos nativamente con PLCs de Allen-Bradley, Siemens, Omron, y Mitsubishi mediante protocolos estándar como OPC-UA, Modbus TCP, Ethernet/IP, y Profinet. También soportamos comunicación directa por señales digitales I/O para aplicaciones de alta velocidad.",
    },
    {
        question: "¿Cuánto tiempo toma el entrenamiento del modelo?",
        answer: "El tiempo de entrenamiento depende de la complejidad del defecto. Para defectos simples, podemos tener un modelo funcional en 2-3 días con 50-100 imágenes de ejemplo. Para aplicaciones más complejas, el proceso puede tomar 1-2 semanas con datasets más extensos.",
    },
    {
        question: "¿Qué velocidad de línea soporta el sistema?",
        answer: "Nuestro sistema puede procesar hasta 60 piezas por segundo dependiendo de la resolución de cámara y complejidad del análisis. Para líneas de alta velocidad utilizamos hardware de procesamiento GPU dedicado que garantiza latencias menores a 50ms.",
    },
    {
        question: "¿Se puede usar en ambientes hostiles?",
        answer: "Sí, ofrecemos gabinetes industriales IP65/IP67 para proteger el equipo contra polvo, agua, y vibraciones. Nuestros sistemas operan en rangos de temperatura de -10°C a 50°C y soportan ambientes con interferencia electromagnética típica de plantas industriales.",
    },
    {
        question: "¿Qué pasa si el modelo comete un error?",
        answer: "Implementamos un sistema de revisión humana opcional donde las piezas con baja confianza de clasificación pueden ser revisadas manualmente. Además, el sistema aprende continuamente de estas correcciones para mejorar su precisión con el tiempo.",
    },
];
---

<section
    id="faq"
    class="relative py-20 overflow-hidden bg-white dark:bg-gray-950"
>
    <!-- Líneas decorativas -->
    <div class="absolute inset-0 z-0 overflow-hidden">
        <div
            class="absolute top-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#005EB8]/10 to-transparent"
        >
        </div>
        <div
            class="absolute bottom-1/3 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#00B5E2]/10 to-transparent"
        >
        </div>
    </div>

    <Container className="relative z-10">
        <!-- Encabezado -->
        <div class="max-w-3xl mx-auto text-center mb-12" data-animate="fade-up">
            <div
                class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-[#005EB8]/30 bg-[#005EB8]/5 dark:bg-[#005EB8]/10 mb-6"
            >
                <div class="w-2 h-2 rounded-full bg-[#00B5E2] animate-pulse">
                </div>
                <span
                    class="text-sm font-medium text-[#005EB8] dark:text-[#4da6ff] uppercase tracking-wider"
                >
                    FAQ
                </span>
            </div>

            <h2
                class="text-3xl sm:text-4xl lg:text-5xl font-semibold font-['FieldworkGeo'] text-[#211915] dark:text-white leading-tight mb-4"
            >
                Preguntas
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-[#001489] via-[#005EB8] to-[#00B5E2] dark:from-[#4da6ff] dark:via-[#00B5E2] dark:to-[#6de0ff]"
                >
                    frecuentes
                </span>
            </h2>

            <p class="text-gray-600 dark:text-gray-400 text-lg leading-relaxed">
                Respuestas a las dudas más comunes sobre Insytech Vision.
            </p>
        </div>

        <!-- Acordeón de FAQ -->
        <div
            class="max-w-3xl mx-auto space-y-4"
            data-animate="fade-up"
            data-animate-delay=".1s"
        >
            {
                faqItems.map((item, index) => (
                    <div class="faq-item border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden bg-white dark:bg-gray-900/50 hover:border-[#005EB8]/30 dark:hover:border-[#005EB8]/50 transition-colors">
                        <button
                            class="faq-trigger w-full px-6 py-5 flex items-center justify-between text-left"
                            aria-expanded="false"
                            aria-controls={`faq-content-${index}`}
                        >
                            <span class="font-semibold text-[#211915] dark:text-white pr-4">
                                {item.question}
                            </span>
                            <div class="faq-icon flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center transition-transform duration-300">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="2"
                                    stroke="currentColor"
                                    class="w-4 h-4 text-gray-600 dark:text-gray-400"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M12 4.5v15m7.5-7.5h-15"
                                    />
                                </svg>
                            </div>
                        </button>
                        <div
                            id={`faq-content-${index}`}
                            class="faq-content hidden px-6 pb-5"
                        >
                            <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                                {item.answer}
                            </p>
                        </div>
                    </div>
                ))
            }
        </div>

        <!-- CTA adicional -->
        <div
            class="text-center mt-12"
            data-animate="fade-up"
            data-animate-delay=".2s"
        >
            <p class="text-gray-500 dark:text-gray-400 mb-4">
                ¿Tienes más preguntas?
            </p>
            <a
                href="#contact"
                class="inline-flex items-center gap-2 text-[#005EB8] dark:text-[#4da6ff] font-medium hover:underline"
            >
                <span>Contáctanos</span>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    class="w-4 h-4"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"></path>
                </svg>
            </a>
        </div>
    </Container>
</section>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const faqItems = document.querySelectorAll(".faq-item");

        faqItems.forEach((item) => {
            const trigger = item.querySelector(".faq-trigger");
            const content = item.querySelector(".faq-content");
            const icon = item.querySelector(".faq-icon");

            if (!trigger || !content || !icon) return;

            trigger.addEventListener("click", () => {
                const isOpen = trigger.getAttribute("aria-expanded") === "true";

                // Close all other items
                faqItems.forEach((otherItem) => {
                    const otherTrigger =
                        otherItem.querySelector(".faq-trigger");
                    const otherContent =
                        otherItem.querySelector(".faq-content");
                    const otherIcon = otherItem.querySelector(".faq-icon");

                    if (
                        otherItem !== item &&
                        otherTrigger &&
                        otherContent &&
                        otherIcon
                    ) {
                        otherTrigger.setAttribute("aria-expanded", "false");
                        otherContent.classList.add("hidden");
                        otherIcon.classList.remove("rotate-45");
                    }
                });

                // Toggle current item
                trigger.setAttribute("aria-expanded", (!isOpen).toString());
                content.classList.toggle("hidden");
                icon.classList.toggle("rotate-45");
            });
        });
    });
</script>

<style>
    .faq-icon {
        transition: transform 0.3s ease;
    }
    .faq-icon.rotate-45 {
        transform: rotate(45deg);
    }
    .faq-icon.rotate-45 svg {
        color: #005eb8;
    }
</style>

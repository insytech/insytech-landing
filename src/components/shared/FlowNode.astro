---
export interface Props {
    icon: string;
    label: string;
    id?: string;
    size?: "normal" | "small";
    className?: string;
    animateType?: string;
    animateDelay?: string;
}

const {
    icon,
    label,
    id,
    size = "normal",
    className = "",
    animateType = "scale",
    animateDelay = "0.3s",
} = Astro.props;

const sizeClass = size === "small" ? "small-node" : "";
const classes = `flow-node ${sizeClass} ${className}`.trim();
---

<div
    id={id}
    class={`
        ${classes}
        flex flex-col items-center gap-2 p-5 min-w-[85px]
        bg-white/90 dark:bg-slate-900/90
        border border-slate-200/60 dark:border-indigo-500/30 
        rounded-2xl backdrop-blur-xl
        transition-all duration-500 ease-out
        relative overflow-hidden
        shadow-lg shadow-slate-200/40 dark:shadow-black/20
        hover:shadow-xl hover:shadow-slate-300/50 dark:hover:shadow-black/25
        hover:-translate-y-1 
        hover:border-slate-300/80 dark:hover:border-indigo-500/60
        before:absolute before:inset-0 before:opacity-30 before:z-0
        before:bg-gradient-radial 
        before:from-slate-100/30 before:via-transparent before:to-transparent
        dark:before:from-indigo-500/20 dark:before:via-transparent dark:before:to-transparent
        hover:before:opacity-50
        after:absolute after:top-0 after:-left-full after:w-full after:h-full after:z-10
        after:bg-gradient-to-r 
        after:from-transparent after:via-slate-400/20 after:to-transparent
        dark:after:from-transparent dark:after:via-white/10 dark:after:to-transparent
        after:transition-all after:duration-700 after:ease-out
        hover:after:left-full
        ${size === "small" ? "min-w-[70px] p-4" : ""}
    `}
    data-animate={animateType}
    data-animate-delay={animateDelay}
>
    <div
        class={`
        node-icon relative z-20
        text-2xl mb-2 transition-all duration-500 ease-out
        drop-shadow-md hover:scale-110 hover:-translate-y-1 hover:drop-shadow-lg
        text-slate-700 dark:text-slate-100
        hover:text-slate-900 dark:hover:text-white
        ${size === "small" ? "text-xl" : ""}
    `}
    >
        {icon}
    </div>
    <span
        class={`
        node-label relative z-20
        text-xs font-semibold text-center
        text-slate-700 dark:text-slate-100
        drop-shadow-sm transition-colors duration-300 ease-out
        hover:text-slate-900 dark:hover:text-white
        max-w-full overflow-hidden text-ellipsis whitespace-nowrap
        ${size === "small" ? "text-[10px]" : ""}
    `}
    >
        {label}
    </span>
</div>
